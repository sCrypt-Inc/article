
# ä½¿ç”¨ sCrypt æž„å»ºäº•å­—æ£‹æ¸¸æˆ - ç¬¬ä¸€éƒ¨åˆ†

# æ‘˜è¦

* è¯¾ç¨‹æ¦‚è¿°
    * è¯•çŽ©æ¸¸æˆ
* å¼€å‘çŽ¯å¢ƒæ­å»º
    * sCrypt IDE
* ç¼–å†™åˆçº¦
    * helloWorld åˆçº¦
    * åŸºæœ¬æ•°æ®ç±»åž‹
    * å±žæ€§
    * static å±žæ€§
    * const å˜é‡
    * å‡½æ•°
    * require è¯­å¥

## è¯¾ç¨‹æ¦‚è¿°

é€šè¿‡æ­¤è¯¾ç¨‹ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•ä½¿ç”¨ sCrypt æž„å»ºä¸€ä¸ªæ¯”ç‰¹å¸ä¸Šçš„äº•å­—æ£‹dAppã€‚
è¯¥åº”ç”¨ç¨‹åºéžå¸¸ç®€å•ã€‚å®ƒæ‰€åšçš„å°±æ˜¯ä½¿ç”¨ä¸¤ä¸ªçŽ©å®¶(åˆ†åˆ«æ˜¯ Alice å’Œ Bob)çš„æ¯”ç‰¹å¸åœ°å€åˆå§‹åŒ–åˆçº¦ï¼Œå„è‡ªä¸‹æ³¨ç›¸åŒçš„é‡‘é¢é”å®šåˆ°åˆçº¦ä¸­ã€‚åªæœ‰èµ¢å¾—é‚£ä¸ªäººå¯ä»¥å–èµ°åˆçº¦é‡Œé¢çš„é’±ã€‚å¦‚æžœæœ€åŽæ²¡æœ‰äººèµ¢ï¼Œåˆ™ä¸¤ä¸ªçŽ©å®¶å„è‡ªå¯ä»¥å–èµ°ä¸€åŠçš„é’±ã€‚

æˆ‘ä»¬å°†é€æ­¥å®Œæˆæž„å»ºappï¼ŒåŒ…æ‹¬:

1. ç¼–å†™åˆçº¦
2. Appå‰ç«¯é›†æˆåˆçº¦

åœ¨å¼€å§‹è¿™ä¸ªè¯¾ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯•çŽ©ä¸€ä¸‹è¯¥æ¸¸æˆ [Go to Play](https://scrypt.io/tic-tac-toe)

> æ“ä½œçŽ©æ¸¸æˆ

## å¼€å‘çŽ¯å¢ƒæ­å»º

åœ¨å¼€å§‹ç¼–å†™åˆçº¦ä¹‹å‰ã€‚æˆ‘ä»¬éœ€è¦å…ˆæ­å»ºå¼€å‘çŽ¯å¢ƒã€‚ sCrypt çš„å¼€å‘çŽ¯å¢ƒéžå¸¸å®¹æ˜“æ­å»ºã€‚åªéœ€å®‰è£…ä¸€ä¸‹è½¯ä»¶:

1. å®‰è£… VS Code 
2. å®‰è£… sCrypt IDE
3. å®‰è£… nodejs
4. git

sCrypt IDE æ˜¯ sCrypt å®˜æ–¹å¼€å‘å·¥å…·, åŒ…å«ç”¨äºŽç¼–å†™ã€ç¼–è¯‘ã€è°ƒè¯•ã€æµ‹è¯•ã€éƒ¨ç½² sCrypt æ™ºèƒ½åˆçº¦çš„ GUI æž„å»ºå™¨å’Œå·¥å…·ï¼Œ ä¸º sCrypt å¼€å‘è€…æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚ å¯ç”¨äºŽä¸“ä¸šå¼€å‘ã€‚ä¹Ÿé€‚ç”¨äºŽsCryptæ™ºèƒ½åˆçº¦çš„å­¦ä¹ ä¸Žæ•™å­¦ã€‚IDE å¯ä»¥åœ¨ VS Code çš„æ’ä»¶è§†å›¾ä¸­ç›´æŽ¥æœç´¢ â€œsCryptâ€ è¿›è¡Œå®‰è£…ã€‚


> æ“ä½œæ‰“å¼€æ’ä»¶è§†å›¾æœç´¢ â€œsCryptâ€

æœ¬ç”µè„‘å·²ç»å®‰è£…å¥½ã€‚è¯·åŒå­¦ä»¬è‡ªè¡Œå®‰è£…ã€‚

## HelloWorld åˆçº¦

ä¸€ä»½sCryptåˆçº¦å°±æ˜¯æ¯”ç‰¹å¸dAppçš„åŸºæœ¬æ¨¡å—ã€‚å®ƒæ˜¯ä½ æ‰€æœ‰dAppçš„èµ·ç‚¹ã€‚sCrypt åˆçº¦ç”±å…³é”®å­— contract å®šä¹‰ï¼Œç±»ä¼¼é¢å‘å¯¹è±¡è¯­è¨€ Java/C++ é‡Œé¢çš„ classã€‚ä¸‹é¢æ˜¯ sCrypt è¯­è¨€çš„ HelloWorld çš„åˆçº¦:

```js
contract HelloWorld {
	public function unlock(bytes message) {
		require(message == "hello world, sCrypt ðŸ˜Š");
	}
}
```

æŽ¥ä¸‹æ¥æˆ‘ä»¬å»ºç«‹ä¸€ä¸ªåä¸º TicTacToe çš„ç©ºåˆçº¦ã€‚

```js
contract TicTacToe {

}
```


## åŸºæœ¬æ•°æ®ç±»åž‹

sCrypt æ˜¯å¼ºç±»åž‹è¯­è¨€ã€‚TicTacToe åˆçº¦å°†ä¼šç”¨åˆ°çš„åŸºæœ¬æ•°æ®ç±»åž‹åŒ…æ‹¬ï¼š

1. bool: å¸ƒå°”å€¼ï¼Œå–å€¼ true æˆ–è€… false

2. int: å¸¦ç¬¦å·çš„æ•´æ•°

3. int[3]: å¤§å°ä¸º3çš„æ•´æ•°æ•°ç»„

4. PubKeyï¼šå…¬é’¥

5. Sigï¼šç­¾å

å¦‚æžœä½ æƒ³äº†è§£æ›´å¤šçš„åŸºæœ¬ç±»åž‹ï¼Œå¯ä»¥æŸ¥çœ‹è¯­è¨€[å‚è€ƒæ–‡æ¡£](https://scryptdoc.readthedocs.io/zh_CN/latest/) 

## å±žæ€§

å’Œä¸€èˆ¬çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸€æ ·ï¼š æ¯ä¸ªåˆçº¦å¯ä»¥æ‹¥æœ‰è‹¥å¹²ä¸ªæˆå‘˜å˜é‡ï¼Œåœ¨è¯¥åˆçº¦çš„å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ this å…³é”®å­—è®¿é—®ã€‚

```js
contract Test {
    int x;
    bool y;
    bytes z;

    public function unlock(int y) {
        require(this.x == y);
    }
}
```

äº•å­—æ£‹æ¸¸æˆåˆçº¦æ”¯æŒä¸¤ä¸ªçŽ©å®¶ï¼Œéœ€è¦ä¿å­˜ä¸¤ä¸ªçŽ©å®¶çš„å…¬é’¥åœ°å€ã€‚åœ¨åˆçº¦è¿è¡Œç»“æŸåŽï¼Œå¦‚æžœæ¸¸æˆä¸æ˜¯ä»¥å¹³å±€ç»“æŸï¼Œåˆçº¦è‡ªåŠ¨å°†é”å®šçš„æ¯”ç‰¹å¸æ‰“ç»™èµ¢å®¶ã€‚å› æ­¤æˆ‘ä»¬å®šä¹‰ ä¸¤ä¸ªå±žæ€§ alice å’Œ bobï¼Œæ•°æ®ç±»åž‹éƒ½æ˜¯ PubKeyã€‚

```js
contract TicTacToe {
    PubKey alice;
    PubKey bob;
}
```

## Static å±žæ€§

å¸¦æœ‰ static å…³é”®å­—ä¿®é¥°çš„å±žæ€§æ˜¯ static å±žæ€§ï¼Œå£°æ˜Ž static å±žæ€§æ—¶å¿…é¡»åˆå§‹åŒ–ã€‚åœ¨è¯¥åˆçº¦çš„å‡½æ•°ä¸­å¯ä»¥é€šè¿‡åˆçº¦ååŠ å±žæ€§åå­—ï¼ˆä¸­é—´åŠ ç‚¹ï¼‰æ¥è®¿é—®ã€‚å¦‚æžœåœ¨å®šä¹‰å®ƒçš„åŒä¸€åˆçº¦ä¸­ä½¿ç”¨ï¼Œåˆ™å¯ä»¥çœç•¥è¯¥å‰ç¼€ã€‚


## Const å˜é‡

ä½¿ç”¨ const å…³é”®å­—çš„ä¿®é¥°å±€çš„å˜é‡ä¸€æ—¦åˆå§‹åŒ–å°±ä¸èƒ½æ›´æ”¹ã€‚

å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤è€…æ¥å£°æ˜Žå±žæ€§ã€‚ è¿™é€šå¸¸ç”¨äºŽå®šä¹‰å¸¸é‡ã€‚

TicTacToe åˆçº¦åŒ…å«ä»¥ä¸‹ å¸¸é‡å±žæ€§:

1. N: ç±»åž‹ä¸º intï¼Œå€¼ä¸º 9ã€‚å®ƒè¡¨ç¤ºå­˜å‚¨æ£‹ç›˜çŠ¶æ€çš„æ•°ç»„é•¿åº¦ï¼Œäº•å­—æ£‹æ¸¸æˆä¸€å…±å…¬æœ‰9ä¸ªæ£‹ç›˜ä½ç½®
2. EMPTY: ç±»åž‹ä¸º intï¼Œå€¼ä¸º 0ã€‚å®ƒè¡¨ç¤ºè¯¥æ£‹ç›˜ä½ç½®è¿˜æœªè½å­
3. ALICE: ç±»åž‹ä¸º intï¼Œå€¼ä¸º 1ã€‚å®ƒè¡¨ç¤ºè¯¥æ£‹ç›˜ä½ç½®è¢«çŽ©å®¶ alice è½å­
4. BOB: ç±»åž‹ä¸º intï¼Œå€¼ä¸º 2ã€‚å®ƒè¡¨ç¤ºè¯¥æ£‹ç›˜ä½ç½®è¢«çŽ©å®¶ bob è½å­

```js
contract TicTacToe {
    PubKey alice;
    PubKey bob;
    
    static const int N = 9;
    static const int EMPTY = 0;
    static const int ALICE = 1;
    static const int BOB = 2;
}
```

## å‡½æ•°

### æ™®é€šå‡½æ•° ï¼ˆfunctionï¼‰
å‡½æ•°ä½¿ç”¨ function å…³é”®å­—å£°æ˜Žã€‚å‡½æ•°ä¸»è¦ä½œç”¨æ˜¯å°è£…åˆçº¦å†…éƒ¨é€»è¾‘åŠä»£ç é‡ç”¨ã€‚å®šä¹‰å‡½æ•°æ—¶éœ€è¦ä½¿ç”¨å†’å· : æ¥è¯´æ˜Žè¿”å›žå€¼çš„ç±»åž‹ã€‚

### å…¬å…±å‡½æ•° ï¼ˆpublic functionï¼‰

å…¬å…±å‡½æ•°ä½¿ç”¨ public ä¿®é¥°ç¬¦ä¿®é¥°å‡½æ•°ï¼Œæ˜¯å¤–éƒ¨è°ƒç”¨åˆçº¦çš„æŽ¥å£ã€‚å…¬å…±å‡½æ•°çš„å‚æ•°ä»£è¡¨ UTXO æ¨¡åž‹(åœ¨ä¸‹ä¸€èŠ‚è¯¾ä»‹ç»)ä¸­çš„è§£é”å‚æ•°ã€‚å…¬å…±å‡½æ•°æ²¡æœ‰æ˜Žç¡®çš„è¿”å›žç±»åž‹å£°æ˜Žå’Œå‡½æ•°ç»“å°¾çš„ return è¯­å¥ï¼Œéšå½¢è¿”å›ž bool ç±»åž‹ï¼Œè¿”å›žå€¼ä¸º trueã€‚

TicTacToe åˆçº¦ä¸­æœ‰ 3 ä¸ªå‡½æ•°ï¼š

- move() : å…¬å…±å‡½æ•°ã€‚TicTacToe åˆçº¦æä¾›ç»™å¤–éƒ¨è°ƒç”¨çš„æŽ¥å£ã€‚ Alice å’Œ Bob å„è‡ªå°† X ä¸ªæ¯”ç‰¹å¸é”å®šåœ¨åŒ…å«ä¸Šè¿°åˆçº¦çš„ä¸€ä¸ª UTXO ä¸­ã€‚ æŽ¥ä¸‹æ¥ï¼Œä»–ä»¬é€šè¿‡è°ƒç”¨å…¬å…±å‡½æ•° move() äº¤æ›¿çŽ©æ¸¸æˆã€‚å…¬å…±å‡½æ•° move()æœ‰ 4 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼š

    1. n : åœ¨æ£‹ç›˜ä¸Šå“ªä¸ªä½ç½®ä¸‹æ£‹
    2. sig : çŽ©å®¶çš„ç­¾å
    3. amount : å‡åŽ»äº¤æ˜“æ‰‹ç»­è´¹åŽçš„åˆçº¦ä½™é¢
    4. txPreimage: å°†åœ¨ç¬¬ä¸ƒç« ä»‹ç»

- won() : å›žç±»åž‹ boolï¼Œä½œç”¨æ˜¯æ£€æŸ¥æ˜¯å¦æœ‰çŽ©å®¶å·²ç»èµ¢å¾—æ¯”èµ›ï¼Œä»–å°†èƒ½å–èµ°æ‰€æœ‰åˆçº¦é”å®šçš„èµŒæ³¨

- full() : å›žç±»åž‹ boolï¼Œä½œç”¨æ˜¯æ£€æŸ¥æ£‹ç›˜æ‰€æœ‰æ ¼å­æ˜¯å¦éƒ½æœ‰æ£‹å­äº†ï¼Œå¦‚æžœæ²¡äººèµ¢å¾—æ¯”èµ›ï¼Œåˆ™ä¸¤ä¸ªäººå¹³åˆ†èµŒæ³¨

æˆ‘ä»¬ä¸ºåˆçº¦æ·»åŠ è¿™ä¸‰ä¸ªå‡½æ•°ã€‚

## require è¯­å¥

require è¯­å¥ åŒ…å« require å…³é”®å­—å’Œä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ã€‚è¯¥è¯­å¥ä¼šæ£€æŸ¥å¸ƒå°”è¡¨è¾¾å¼æ˜¯å¦ä¸ºçœŸã€‚å½“ä¸æ»¡è¶³æŸäº›æ¡ä»¶æ—¶æŠ›å‡ºé”™è¯¯ï¼Œå¹¶åœæ­¢æ‰§è¡Œã€‚è¿™ä¸Ž solidity è¯­è¨€çš„ require ç±»ä¼¼ã€‚sCrypt å…¬æœ‰å‡½æ•°çš„æœ€åŽä¸€ä¸ªè¯­å¥å¿…é¡»æ˜¯ require è¯­å¥ï¼Œåˆçº¦çš„æ¯ä¸ªå…¬æœ‰å‡½æ•°è‡³å°‘æœ‰ä¸€ä¸ª require è¯­å¥ã€‚å½“ä¸”ä»…å½“æ‰€æœ‰ require è¯­å¥ éƒ½æ£€æŸ¥é€šè¿‡ï¼Œåˆçº¦æ‰èƒ½è¢«æˆåŠŸè§£é”ã€‚å³å‚æ•° n æ˜¯ä¸€ä¸ªåœ¨æ£‹ç›˜ä¸­çš„æœ‰æ•ˆå€¼ã€‚

æŽ¥ä¸‹æ¥ä¸ºå…¬å…±å‡½æ•° move æ·»åŠ  require è¯­å¥ï¼Œè¦æ±‚å‡½æ•°å‚æ•° n å¿…é¡»å¤§äºŽç­‰äºŽ 0ï¼Œ ä¸”å°äºŽåˆçº¦çš„ static å±žæ€§ Nã€‚å³å‚æ•° n æ˜¯ä¸€ä¸ªåœ¨æ£‹ç›˜ä¸­çš„æœ‰æ•ˆå€¼ã€‚

```js
contract TicTacToe {
    PubKey alice;
    PubKey bob;
    
    static const int N = 9;
    static const int EMPTY = 0;
    static const int ALICE = 1;
    static const int BOB = 2;

    public function move(int n, Sig sig, int amount, SigHashPreimage txPreimage) {

        require(n >= 0 && n < N);
    }


    function won(int play) : bool {
        return true;
    }


    function full() : bool {
        return true;
    }
}
```

# æ€»ç»“

è¿™èŠ‚è¯¾æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹  sCrypt å¼€å‘çŽ¯å¢ƒæ­å»ºï¼ŒåŸºç¡€è¯­è¨€è¯­æ³•çŸ¥è¯†ã€‚ç¼–å†™äº† TicTacToe åˆçº¦çš„åŸºæœ¬æ¡†æž¶ã€‚

